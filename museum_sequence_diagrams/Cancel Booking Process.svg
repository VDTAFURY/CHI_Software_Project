<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2389px" preserveAspectRatio="none" style="width:1354px;height:2389px;background:#FFFFFF;" version="1.1" viewBox="0 0 1354 2389" width="1354px" zoomAndPan="magnify"><title>**Cancel Booking Process**</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="187.2773" x="584.7424" y="27.9951">Cancel Booking Process</text><g><title>Booking</title><rect fill="#FFFFFF" height="2101.7031" style="stroke:#181818;stroke-width:1;" width="10" x="343.1108" y="181.1563"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="210.2891"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="103.6641" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="815.0859"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="104.5313" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="1640.2656"/></g><g><title>Capacity</title><rect fill="#FFFFFF" height="149.0625" style="stroke:#181818;stroke-width:1;" width="10" x="636.1494" y="993.2813"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="254.5547"/></g><g><title>Database</title><rect fill="#FFFFFF" height="534.5859" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="770.8203"/></g><g><title>Database</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="1714.7969"/></g><g><title>Database</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="1862.1328"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="2043.7969"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="478.9297" style="stroke:#181818;stroke-width:1;" width="10" x="911.3931" y="1470.3359"/></g><g><title>Email</title><rect fill="#FFFFFF" height="217.0625" style="stroke:#181818;stroke-width:1;" width="10" x="1047.1079" y="1999.5313"/></g><g><title>Audit</title><rect fill="#FFFFFF" height="89.6641" style="stroke:#181818;stroke-width:1;" width="10" x="1261.5083" y="1186.6094"/></g><g><title>Audit</title><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1261.5083" y="1833"/></g><rect fill="none" height="1890.7734" style="stroke:#000000;stroke-width:1.5;" width="1337.7622" x="10" y="385.0859"/><rect fill="none" height="1728.1719" style="stroke:#000000;stroke-width:1.5;" width="1317.7622" x="20" y="540.6875"/><rect fill="none" height="635.8594" style="stroke:#000000;stroke-width:1.5;" width="1051.2378" x="276.5244" y="1320.4063"/><rect fill="none" height="547.4609" style="stroke:#000000;stroke-width:1.5;" width="1031.2378" x="286.5244" y="1401.8047"/><rect fill="none" height="414.7969" style="stroke:#000000;stroke-width:1.5;" width="1011.2378" x="296.5244" y="1527.4688"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="96.8022" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="100" x2="100" y1="134.8906" y2="2292.8594"/></g><g><title>Booking</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="344.1108" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="347.5244" x2="347.5244" y1="134.8906" y2="2292.8594"/></g><g><title>Booking</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="554.2202" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="557.9741" x2="557.9741" y1="134.8906" y2="2292.8594"/></g><g><title>Capacity</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="637.1494" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="640.4663" x2="640.4663" y1="134.8906" y2="2292.8594"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="824.0327" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="827.6323" x2="827.6323" y1="134.8906" y2="2292.8594"/></g><g><title>Payment</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="912.3931" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="915.4331" x2="915.4331" y1="134.8906" y2="2292.8594"/></g><g><title>Email</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="1048.1079" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1051.2373" x2="1051.2373" y1="134.8906" y2="2292.8594"/></g><g><title>Audit</title><rect fill="#000000" fill-opacity="0.00000" height="2157.9688" width="8" x="1262.5083" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1266.2544" x2="1266.2544" y1="134.8906" y2="2292.8594"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="81.8472" y="115.292">User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.6045" x="30" y="131.5889">(Registered Visitor)</text><ellipse cx="100.8022" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M100.8022,58.7969 L100.8022,85.7969 M87.8022,66.7969 L113.8022,66.7969 M100.8022,85.7969 L87.8022,100.7969 M100.8022,85.7969 L113.8022,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="81.8472" y="2304.8545">User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.6045" x="30" y="2321.1514">(Registered Visitor)</text><ellipse cx="100.8022" cy="2332.9531" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M100.8022,2340.9531 L100.8022,2367.9531 M87.8022,2348.9531 L113.8022,2348.9531 M100.8022,2367.9531 L87.8022,2382.9531 M100.8022,2367.9531 L113.8022,2382.9531" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="BookCtrl"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.1729" x="306.5244" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4922" x="319.8647" y="107.292">Booking</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.1729" x="313.5244" y="123.5889">Controller</text></g><g class="participant participant-tail" data-participant="BookCtrl"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.1729" x="306.5244" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4922" x="319.8647" y="2311.8545">Booking</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.1729" x="313.5244" y="2328.1514">Controller</text></g><g class="participant participant-head" data-participant="BookModel"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.4922" x="522.9741" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4922" x="529.9741" y="107.292">Booking</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="537.2031" y="123.5889">Model</text></g><g class="participant participant-tail" data-participant="BookModel"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.4922" x="522.9741" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.4922" x="529.9741" y="2311.8545">Booking</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.0342" x="537.2031" y="2328.1514">Model</text></g><g class="participant participant-head" data-participant="Capacity"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.3662" x="603.4663" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.1816" x="610.5586" y="107.292">Capacity</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.3662" x="610.4663" y="123.5889">Manager</text></g><g class="participant participant-tail" data-participant="Capacity"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.3662" x="603.4663" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.1816" x="610.5586" y="2311.8545">Capacity</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.3662" x="610.4663" y="2328.1514">Manager</text></g><g class="participant participant-head" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="787.6323" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="794.6323" y="123.5889">Database</text></g><g class="participant participant-tail" data-participant="DB"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="787.6323" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="794.6323" y="2311.8545">Database</text></g><g class="participant participant-head" data-participant="Payment"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.9199" x="878.4331" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.9199" x="885.4331" y="107.292">Payment</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.8447" x="885.4707" y="123.5889">Gateway</text></g><g class="participant participant-tail" data-participant="Payment"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.9199" x="878.4331" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.9199" x="885.4331" y="2311.8545">Payment</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.8447" x="885.4707" y="2328.1514">Gateway</text></g><g class="participant participant-head" data-participant="Email"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.7412" x="1019.2373" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.8418" x="1032.687" y="107.292">Email</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.7412" x="1026.2373" y="123.5889">Service</text></g><g class="participant participant-tail" data-participant="Email"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.7412" x="1019.2373" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38.8418" x="1032.687" y="2311.8545">Email</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.7412" x="1026.2373" y="2328.1514">Service</text></g><g class="participant participant-head" data-participant="Logger"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62.5078" x="1235.2544" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1248.1504" y="107.292">Audit</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48.5078" x="1242.2544" y="123.5889">Logger</text></g><g class="participant participant-tail" data-participant="Logger"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62.5078" x="1235.2544" y="2291.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.7158" x="1248.1504" y="2311.8545">Audit</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48.5078" x="1242.2544" y="2328.1514">Logger</text></g><g><title>Booking</title><rect fill="#FFFFFF" height="2101.7031" style="stroke:#181818;stroke-width:1;" width="10" x="343.1108" y="181.1563"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="210.2891"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="103.6641" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="815.0859"/></g><g><title>Booking</title><rect fill="#FFFFFF" height="104.5313" style="stroke:#181818;stroke-width:1;" width="10" x="553.2202" y="1640.2656"/></g><g><title>Capacity</title><rect fill="#FFFFFF" height="149.0625" style="stroke:#181818;stroke-width:1;" width="10" x="636.1494" y="993.2813"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="254.5547"/></g><g><title>Database</title><rect fill="#FFFFFF" height="534.5859" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="770.8203"/></g><g><title>Database</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="1714.7969"/></g><g><title>Database</title><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="1862.1328"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="823.0327" y="2043.7969"/></g><g><title>Payment</title><rect fill="#FFFFFF" height="478.9297" style="stroke:#181818;stroke-width:1;" width="10" x="911.3931" y="1470.3359"/></g><g><title>Email</title><rect fill="#FFFFFF" height="217.0625" style="stroke:#181818;stroke-width:1;" width="10" x="1047.1079" y="1999.5313"/></g><g><title>Audit</title><rect fill="#FFFFFF" height="89.6641" style="stroke:#181818;stroke-width:1;" width="10" x="1261.5083" y="1186.6094"/></g><g><title>Audit</title><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1261.5083" y="1833"/></g><g class="message" data-participant-1="User" data-participant-2="BookCtrl"><polygon fill="#181818" points="331.1108,177.1563,341.1108,181.1563,331.1108,185.1563,335.1108,181.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="100.8022" x2="337.1108" y1="181.1563" y2="181.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.271" x="146.321" y="160.9575">requestCancelBooking(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.9482" x="187.4824" y="176.0903">bookingId)</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="BookModel"><polygon fill="#181818" points="541.2202,206.2891,551.2202,210.2891,541.2202,214.2891,545.2202,210.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="547.2202" y1="210.2891" y2="210.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.522" x="364.9045" y="205.2231">getBookingById(bookingId)</text></g><g class="message" data-participant-1="BookModel" data-participant-2="DB"><polygon fill="#181818" points="811.0327,250.5547,821.0327,254.5547,811.0327,258.5547,815.0327,254.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="563.2202" x2="817.0327" y1="254.5547" y2="254.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.3599" x="610.9465" y="234.356">SELECT * FROM bookings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1431" x="648.0549" y="249.4888">WHERE id = ?</text></g><g class="message" data-participant-1="DB" data-participant-2="BookModel"><polygon fill="#181818" points="574.2202,279.6875,564.2202,283.6875,574.2202,287.6875,570.2202,283.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="568.2202" x2="827.0327" y1="283.6875" y2="283.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.519" x="646.8669" y="278.6216">bookingRecord</text></g><g class="message" data-participant-1="BookModel" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,308.8203,354.1108,312.8203,364.1108,316.8203,360.1108,312.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="557.2202" y1="312.8203" y2="312.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.519" x="406.906" y="307.7544">bookingRecord</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="BookCtrl"><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="395.1108" y1="357.0859" y2="357.0859"/><line style="stroke:#181818;stroke-width:1;" x1="395.1108" x2="395.1108" y1="357.0859" y2="370.0859"/><line style="stroke:#181818;stroke-width:1;" x1="354.1108" x2="395.1108" y1="370.0859" y2="370.0859"/><polygon fill="#181818" points="364.1108,366.0859,354.1108,370.0859,364.1108,374.0859,360.1108,370.0859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.3125" x="382.6641" y="336.8872">verifyOwnership(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.4189" x="360.1108" y="352.02">userId, booking.user_id)</text></g><path d="M10,385.0859 L74.4429,385.0859 L74.4429,392.2188 L64.4429,402.2188 L10,402.2188 L10,385.0859" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1890.7734" style="stroke:#000000;stroke-width:1.5;" width="1337.7622" x="10" y="385.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="398.1528">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="184.0889" x="89.4429" y="397.2964">[User Does Not Own Booking]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="User"><polygon fill="#181818" points="111.8022,449.6172,101.8022,453.6172,111.8022,457.6172,107.8022,453.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="105.8022" x2="342.1108" y1="453.6172" y2="453.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.4336" x="180.2397" y="418.2856">displayError(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.6353" x="144.6389" y="433.4185">"You are not authorized</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.1211" x="144.896" y="448.5513">to cancel this booking")</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1347.7622" y1="462.6172" y2="462.6172"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130.2598" x="15" y="472.8276">[User Owns Booking]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="BookCtrl"><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="395.1108" y1="512.6875" y2="512.6875"/><line style="stroke:#181818;stroke-width:1;" x1="395.1108" x2="395.1108" y1="512.6875" y2="525.6875"/><line style="stroke:#181818;stroke-width:1;" x1="354.1108" x2="395.1108" y1="525.6875" y2="525.6875"/><polygon fill="#181818" points="364.1108,521.6875,354.1108,525.6875,364.1108,529.6875,360.1108,525.6875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.5098" x="360.1108" y="492.4888">checkCancellationPolicy(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.5952" x="379.0681" y="507.6216">booking.visit_date)</text></g><path d="M20,540.6875 L84.4429,540.6875 L84.4429,547.8203 L74.4429,557.8203 L20,557.8203 L20,540.6875" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1728.1719" style="stroke:#000000;stroke-width:1.5;" width="1317.7622" x="20" y="540.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="553.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152.813" x="99.4429" y="552.8979">[Visit Date &lt;= 48 Hours]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="User"><polygon fill="#181818" points="111.8022,605.2188,101.8022,609.2188,111.8022,613.2188,107.8022,609.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="105.8022" x2="342.1108" y1="609.2188" y2="609.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.291" x="161.311" y="573.8872">displayPolicyError(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.3589" x="150.7771" y="589.02">"Cannot cancel within</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.8574" x="164.0278" y="604.1528">48 hours of visit")</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="User"><polygon fill="#181818" points="111.8022,634.3516,101.8022,638.3516,111.8022,642.3516,107.8022,638.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="105.8022" x2="342.1108" y1="638.3516" y2="638.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.4966" x="140.2083" y="633.2856">suggestContactSupport()</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="1337.7622" y1="647.3516" y2="647.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="78.2891" x="25" y="657.562">[Can Cancel]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="User"><polygon fill="#181818" points="111.8022,708.5547,101.8022,712.5547,111.8022,716.5547,107.8022,712.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="105.8022" x2="342.1108" y1="712.5547" y2="712.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.0869" x="113.9131" y="677.2231">displayCancellationConfirmation(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.8071" x="145.553" y="692.356">"Are you sure you want</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.2446" x="183.3342" y="707.4888">to cancel?")</text></g><g class="message" data-participant-1="User" data-participant-2="BookCtrl"><polygon fill="#181818" points="331.1108,737.6875,341.1108,741.6875,331.1108,745.6875,335.1108,741.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="100.8022" x2="337.1108" y1="741.6875" y2="741.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.2007" x="151.8562" y="736.6216">confirmCancellation()</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="DB"><polygon fill="#181818" points="811.0327,766.8203,821.0327,770.8203,811.0327,774.8203,815.0327,770.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="817.0327" y1="770.8203" y2="770.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.4424" x="518.8506" y="765.7544">BEGIN TRANSACTION</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="BookModel"><polygon fill="#181818" points="541.2202,811.0859,551.2202,815.0859,541.2202,819.0859,545.2202,815.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="547.2202" y1="815.0859" y2="815.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.7583" x="380.7864" y="794.8872">updateBookingStatus(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.3325" x="379.9993" y="810.02">bookingId, 'cancelled')</text></g><g class="message" data-participant-1="BookModel" data-participant-2="DB"><polygon fill="#181818" points="811.0327,885.6172,821.0327,889.6172,811.0327,893.6172,815.0327,889.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="563.2202" x2="817.0327" y1="889.6172" y2="889.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.1084" x="635.5723" y="839.1528">UPDATE bookings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.1846" x="583.5342" y="854.2856">SET booking_status = 'cancelled',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.4194" x="583.4167" y="869.4185">modification_timestamp = NOW()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1431" x="648.0549" y="884.5513">WHERE id = ?</text></g><g class="message" data-participant-1="BookModel" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,914.75,354.1108,918.75,364.1108,922.75,360.1108,918.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="557.2202" y1="918.75" y2="918.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.8511" x="430.24" y="913.6841">success</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="Capacity"><polygon fill="#181818" points="624.1494,989.2813,634.1494,993.2813,624.1494,997.2813,628.1494,993.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="630.1494" y1="993.2813" y2="993.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.5732" x="439.8435" y="942.8169">releaseCapacity(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6558" x="433.3022" y="957.9497">booking.visit_date,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.3613" x="434.9495" y="973.0825">booking.time_slot,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.7764" x="413.7419" y="988.2153">booking.visitor_quantity)</text></g><g class="message" data-participant-1="Capacity" data-participant-2="DB"><polygon fill="#181818" points="811.0327,1109.2109,821.0327,1113.2109,811.0327,1117.2109,815.0327,1113.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="646.1494" x2="817.0327" y1="1113.2109" y2="1113.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.4268" x="678.8777" y="1017.3481">UPDATE capacity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.8833" x="658.1494" y="1032.481">SET booked_capacity =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.3071" x="667.9375" y="1047.6138">booked_capacity - ?,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.0845" x="667.0488" y="1062.7466">available_capacity =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1167" x="661.5327" y="1077.8794">available_capacity + ?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.8799" x="664.1511" y="1093.0122">WHERE visit_date = ?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.1235" x="675.5293" y="1108.145">AND time_slot = ?</text></g><g class="message" data-participant-1="Capacity" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,1138.3438,354.1108,1142.3438,364.1108,1146.3438,360.1108,1142.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="640.1494" y1="1142.3438" y2="1142.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.5117" x="439.8743" y="1137.2778">capacityReleased</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="Logger"><polygon fill="#181818" points="1249.5083,1182.6094,1259.5083,1186.6094,1249.5083,1190.6094,1253.5083,1186.6094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="1255.5083" y1="1186.6094" y2="1186.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.4092" x="754.605" y="1166.4106">logCancellation(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.6538" x="748.4827" y="1181.5435">userId, bookingId)</text></g><g class="message" data-participant-1="Logger" data-participant-2="DB"><polygon fill="#181818" points="844.0327,1272.2734,834.0327,1276.2734,844.0327,1280.2734,840.0327,1276.2734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="838.0327" x2="1265.5083" y1="1276.2734" y2="1276.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.2515" x="973.1448" y="1210.6763">INSERT INTO audit_logs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.2031" x="997.6689" y="1225.8091">(user_id, action,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.7144" x="978.4133" y="1240.9419">entity_type, entity_id)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.0591" x="956.241" y="1256.0747">VALUES (?, 'cancel_booking',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.1743" x="1010.1833" y="1271.2075">'booking', ?)</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="DB"><polygon fill="#181818" points="816.0327,1301.4063,826.0327,1305.4063,816.0327,1309.4063,820.0327,1305.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="822.0327" y1="1305.4063" y2="1305.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.1948" x="514.9744" y="1300.3403">COMMIT TRANSACTION</text></g><path d="M276.5244,1320.4063 L345.9756,1320.4063 L345.9756,1327.5391 L335.9756,1337.5391 L276.5244,1337.5391 L276.5244,1320.4063" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="635.8594" style="stroke:#000000;stroke-width:1.5;" width="1051.2378" x="276.5244" y="1320.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4512" x="291.5244" y="1333.4731">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132.188" x="360.9756" y="1332.6167">[Payment Was Made]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="BookCtrl"><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="395.1108" y1="1373.8047" y2="1373.8047"/><line style="stroke:#181818;stroke-width:1;" x1="395.1108" x2="395.1108" y1="1373.8047" y2="1386.8047"/><line style="stroke:#181818;stroke-width:1;" x1="354.1108" x2="395.1108" y1="1386.8047" y2="1386.8047"/><polygon fill="#181818" points="364.1108,1382.8047,354.1108,1386.8047,364.1108,1390.8047,360.1108,1386.8047" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.0542" x="368.6992" y="1353.606">checkPaymentStatus(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.231" x="360.1108" y="1368.7388">booking.booking_status)</text></g><path d="M286.5244,1401.8047 L350.9673,1401.8047 L350.9673,1408.9375 L340.9673,1418.9375 L286.5244,1418.9375 L286.5244,1401.8047" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="547.4609" style="stroke:#000000;stroke-width:1.5;" width="1031.2378" x="286.5244" y="1401.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="301.5244" y="1414.8716">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.2549" x="365.9673" y="1414.0151">[Payment Made]</text><g class="message" data-participant-1="BookCtrl" data-participant-2="Payment"><polygon fill="#181818" points="899.3931,1466.3359,909.3931,1470.3359,899.3931,1474.3359,903.3931,1470.3359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="905.3931" y1="1470.3359" y2="1470.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.6514" x="581.4263" y="1435.0044">processRefund(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.2524" x="570.6257" y="1450.1372">booking.total_cost,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.2041" x="523.6499" y="1465.27">booking.payment_transaction_id)</text></g><g class="message" data-participant-1="Payment" data-participant-2="Payment"><line style="stroke:#181818;stroke-width:1;" x1="921.3931" x2="963.3931" y1="1499.4688" y2="1499.4688"/><line style="stroke:#181818;stroke-width:1;" x1="963.3931" x2="963.3931" y1="1499.4688" y2="1512.4688"/><line style="stroke:#181818;stroke-width:1;" x1="922.3931" x2="963.3931" y1="1512.4688" y2="1512.4688"/><polygon fill="#181818" points="932.3931,1508.4688,922.3931,1512.4688,932.3931,1516.4688,928.3931,1512.4688" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7148" x="928.3931" y="1494.4028">initiateRefund()</text></g><path d="M296.5244,1527.4688 L360.9673,1527.4688 L360.9673,1534.6016 L350.9673,1544.6016 L296.5244,1544.6016 L296.5244,1527.4688" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="414.7969" style="stroke:#000000;stroke-width:1.5;" width="1011.2378" x="296.5244" y="1527.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="311.5244" y="1540.5356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123.8735" x="375.9673" y="1539.6792">[Refund Successful]</text><g class="message" data-participant-1="Payment" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,1576.8672,354.1108,1580.8672,364.1108,1584.8672,360.1108,1580.8672" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="910.3931" y1="1580.8672" y2="1580.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.1123" x="582.6958" y="1560.6685">refundSuccess,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.0156" x="566.7441" y="1575.8013">refundTransactionId</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="BookModel"><polygon fill="#181818" points="541.2202,1636.2656,551.2202,1640.2656,541.2202,1644.2656,545.2202,1640.2656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="547.2202" y1="1640.2656" y2="1640.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.7983" x="378.2664" y="1604.9341">updatePaymentStatus(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.0088" x="419.1611" y="1620.0669">bookingId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.0874" x="385.1218" y="1635.1997">refundTransactionId)</text></g><g class="message" data-participant-1="BookModel" data-participant-2="DB"><polygon fill="#181818" points="811.0327,1710.7969,821.0327,1714.7969,811.0327,1718.7969,815.0327,1714.7969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="563.2202" x2="817.0327" y1="1714.7969" y2="1714.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.1084" x="635.5723" y="1664.3325">UPDATE bookings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.1123" x="585.0703" y="1679.4653">SET booking_status = 'refunded',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.0068" x="609.623" y="1694.5981">refund_transaction_id = ?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1431" x="648.0549" y="1709.731">WHERE id = ?</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="296.5244" x2="1307.7622" y1="1753.7969" y2="1753.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95.9492" x="301.5244" y="1764.0073">[Refund Failed]</text><g class="message" data-participant-1="Payment" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,1784.7344,354.1108,1788.7344,364.1108,1792.7344,360.1108,1788.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="910.3931" y1="1788.7344" y2="1788.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.5674" x="591.4683" y="1783.6685">refundFailed</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="Logger"><polygon fill="#181818" points="1249.5083,1829,1259.5083,1833,1249.5083,1837,1253.5083,1833" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="1255.5083" y1="1833" y2="1833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4766" x="749.5713" y="1812.8013">logRefundFailure(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.9482" x="772.8354" y="1827.9341">bookingId)</text></g><g class="message" data-participant-1="Logger" data-participant-2="DB"><polygon fill="#181818" points="844.0327,1858.1328,834.0327,1862.1328,844.0327,1866.1328,840.0327,1862.1328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="838.0327" x2="1260.5083" y1="1862.1328" y2="1862.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.2515" x="970.6448" y="1857.0669">INSERT INTO audit_logs</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="BookCtrl"><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="395.1108" y1="1921.2656" y2="1921.2656"/><line style="stroke:#181818;stroke-width:1;" x1="395.1108" x2="395.1108" y1="1921.2656" y2="1934.2656"/><line style="stroke:#181818;stroke-width:1;" x1="354.1108" x2="395.1108" y1="1934.2656" y2="1934.2656"/><polygon fill="#181818" points="364.1108,1930.2656,354.1108,1934.2656,364.1108,1938.2656,360.1108,1934.2656" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.1094" x="360.1108" y="1916.1997">createManualReviewTask()</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="Email"><polygon fill="#181818" points="1035.1079,1995.5313,1045.1079,1999.5313,1035.1079,2003.5313,1039.1079,1999.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="353.1108" x2="1041.1079" y1="1999.5313" y2="1999.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9214" x="623.6487" y="1979.3325">sendCancellationEmail(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.2964" x="624.4612" y="1994.4653">userId, bookingRecord)</text></g><g class="message" data-participant-1="Email" data-participant-2="DB"><polygon fill="#181818" points="844.0327,2039.7969,834.0327,2043.7969,844.0327,2047.7969,840.0327,2043.7969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="838.0327" x2="1046.1079" y1="2043.7969" y2="2043.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.2759" x="854.9324" y="2023.5981">SELECT email FROM users</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.1431" x="894.9988" y="2038.731">WHERE id = ?</text></g><g class="message" data-participant-1="DB" data-participant-2="Email"><polygon fill="#181818" points="1035.1079,2068.9297,1045.1079,2072.9297,1035.1079,2076.9297,1039.1079,2072.9297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="828.0327" x2="1041.1079" y1="2072.9297" y2="2072.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.4224" x="905.3591" y="2067.8638">userEmail</text></g><g class="message" data-participant-1="Email" data-participant-2="Email"><line style="stroke:#181818;stroke-width:1;" x1="1057.1079" x2="1099.1079" y1="2132.3281" y2="2132.3281"/><line style="stroke:#181818;stroke-width:1;" x1="1099.1079" x2="1099.1079" y1="2132.3281" y2="2145.3281"/><line style="stroke:#181818;stroke-width:1;" x1="1058.1079" x2="1099.1079" y1="2145.3281" y2="2145.3281"/><polygon fill="#181818" points="1068.1079,2141.3281,1058.1079,2145.3281,1068.1079,2149.3281,1064.1079,2145.3281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.4004" x="1064.1079" y="2096.9966">composeCancellationEmail(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.2559" x="1093.1802" y="2112.1294">bookingReference,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.7339" x="1096.9412" y="2127.2622">cancellationDate)</text></g><g class="message" data-participant-1="Email" data-participant-2="Email"><line style="stroke:#181818;stroke-width:1;" x1="1057.1079" x2="1099.1079" y1="2174.4609" y2="2174.4609"/><line style="stroke:#181818;stroke-width:1;" x1="1099.1079" x2="1099.1079" y1="2174.4609" y2="2187.4609"/><line style="stroke:#181818;stroke-width:1;" x1="1058.1079" x2="1099.1079" y1="2187.4609" y2="2187.4609"/><polygon fill="#181818" points="1068.1079,2183.4609,1058.1079,2187.4609,1068.1079,2191.4609,1064.1079,2187.4609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.6543" x="1064.1079" y="2169.395">sendSMTP()</text></g><g class="message" data-participant-1="Email" data-participant-2="BookCtrl"><polygon fill="#181818" points="364.1108,2212.5938,354.1108,2216.5938,364.1108,2220.5938,360.1108,2216.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="358.1108" x2="1051.1079" y1="2216.5938" y2="2216.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.438" x="669.8904" y="2211.5278">emailSent</text></g><g class="message" data-participant-1="BookCtrl" data-participant-2="User"><polygon fill="#181818" points="111.8022,2256.8594,101.8022,2260.8594,111.8022,2264.8594,107.8022,2260.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="105.8022" x2="342.1108" y1="2260.8594" y2="2260.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.562" x="170.1755" y="2240.6606">displaySuccess(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.3086" x="112.8022" y="2255.7935">"Booking cancelled successfully")</text></g><!--SRC=[jLXRRo8t57wVNs7n4aX9dlfGeQQ8s-uYBH01sQWI4d9c3B4osBEs1qH_VOzlW-S2JIiLQNTjpxb-n-VYbH-KPLZW0vBaPqvOJ6P4IhmdWvJk6Oe9KqH4ig0IH6QSIKyr92a_3OJW9wH4Jg98KPKIT7y_mY0gHKFEWNMFdWMFWUF-FefmhBX0hHT9n8QrbsHF9QWW2Vf19OLFdHR24kdF4QXKDAOPPWgrdAWD6t6c14zJ8WobFXyfaLwXdl64f0MXsPKfHpZ3CLLd8CKCNB9I_McPTemLViEI69BniFpn6PyF0DU6VSMAdF3P4Bd3CkNaW6cwOIiYZZIsminHcMgG9nIaVUTxRvHTHf461ptyKRZUWx10yAIog3lVsnlsPbVJfADXfqSmx89Nv5TUb06dX_P4EGd3ypHfNvDXeInMMiXus4EhoVV9Q8tkqPVbOeOSizomrs-JvGJH13sX_aKGO3WUeeUo0OvfIM8kaYWX8NMWhmJ0LPwBgJL_BUUH2BexBqwC2FbECq0j1tYdITVBVDJxBGN_8vmgSpFHc1E9vbmXuFENF4Bmk-W09PgqXn8ginIV9v0b0gIt_kGvme8W1kmuL-zSqBz8ic6AezXcZNgdqcjlTIAIIcBLWZPvHLteKlnEuWzx5rAiA6VFFANn-N8X7eywrxO90DGnSinVsZkJX6YiaVlz2Vtw6_h6So7DvzlkMHM5aw1T- -SSEb5mYMqOo7lNyX3V8MD2gtDBjCpXliEjXeI7UAxoBED2jIsB0GMq8Eld9omC0G6HEoeEPgtD7K0ypX0NcRl52UjCBaBI3mmj5lKqZAtOK5ExWJ6CciwPuUJhT8xMoy5yDHYjfujvGHbU_PjYWlJ9CnrNTqjM2gjSXgMWY-wiJob9xZfrJPU42VMKSlpbUJnOJuBaNatMVhULHYEaUQ2cks47dj0TZGqcMqKF45Tyo81ildXjTohreK5p2MUPnxgT57ID-NuJBr_VTUbC2PHqVz2O9DtBeJPzArEkkXL2BhO_SxWr8AC1rQAV-2_-e89fN7GZZob9jluGFLcTuT43weCb-0Zj0x-bf4JRSFeBwdkiB-vfp3TiC1-ZmhjI62wsbc-xErvQ19EcSDJyReo6RMmzbF9zANTgjLXteHgshYtwSxlrk4xdgybo3V-i5r1jeQDkGGbSsRQhwbqZXpC0aPZWRTKv8rtaDb3sD-p7uFlBP8NQ_I9tjiuUVRFlYZNgTvemgDXtjGoC5hFPTDrO1yfDi2Q9PyfF6kWL1eKPJaZnyH_wXEEh5eh7SZvtIk9A6zqslFAQugfoHzX3cPq8bsINioHGgxZ2wJRcCaomp79jbS1CsdYPXbpLL83anwugWRSpj8GogYWmELFgKkjgm6DBZLQs4ktoj4PLqbUPrZIlOmKtxNvzSMwQD4gxMV2ln16Ifr51fr73ZJ9QDUI_T0HhXsq8Tbq9gQr4ZRsWqSmW6S9VSxfSeRZkgfanNA2_G2aboRyEyWssAmLmMV31B5AUuMz2KQaouUyp5V7_n_c6WLVAao301w-o7ATBSgJajCRoeo512QiZ72XkAWOXIxXkBCxcSGPJ1n26xSaSrtkKVOCqz2dxnlF7PbTvDH5pPbvEMgYyaWfDeBjdb3DLSvVLDOUgCCBnnVoGSJqCrRqilDl1Qnq-Gmh70TcuU4iqoTNGhMRhvtQDf1Hnu_ygZ5LWTjcVJmpyhi3g-Tx_FqGnaleH4WftUdR3lRu7-a_r-QYb_mq0]--></g></svg>